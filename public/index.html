<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JHuan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="JHuan">
<meta property="og:url" content="http://Jhuan.coding.me/JHuan/index.html">
<meta property="og:site_name" content="JHuan">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JHuan">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="JHuan" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">JHuan</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">谈笑有鸿儒</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://Jhuan.coding.me/JHuan"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="hexo-谈谈那个大圣的背影" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/24/ciolfsayl0004uc1k67tozvgk/" class="article-date">
  <time datetime="2016-05-24T12:35:45.000Z" itemprop="datePublished">2016-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/24/ciolfsayl0004uc1k67tozvgk/">谈谈那个大圣的背影</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;&nbsp;&nbsp;&nbsp;对不起又要炒旧饭了，改不掉喜旧厌新的毛病没办法。</p>
<p><img src="/img/1.jpg" alt=""></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;这时候拎出来讲这部电影我也不卖关子，还是要厚脸皮可耻的承认终于在25周岁来临之际终于迎来了第一次失恋，对，之前的青春是被狗吃了，对，之前的青春是屎。这个怎么吐槽倒也不在乎了，继续琢磨怎么过好日子和如何控制好烂成渣的情绪才是关键，在此之前，会有段漫长而傻逼的时期，认真看几部电影和书慢慢熬呗。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;讲起大话西游，已经是数不清的文艺青年评到烂了，凭我这种连电影爱好者都算不上的水平，自然是发掘不出什么更好的梗了，也不会将剧情讲成悬案，也懒得追究这部电影到底涉及到几个平行空间以及关于轮回的探讨。作为一个普通到庸俗的人，也是经历过第一次看哈哈大笑，第二次看沉默不语，第三次看泪流满面的庸俗过程。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;刚失恋时在发烧，烧了三天，根本没心情去治，难得可以让脑子休息一下不去思索太多关于现实的事，于是一遍又一遍的看，也略读了一下各种影评，矫情的也读，严肃的也读，然后继续躺在床上，一遍又一遍的看。严格来说，也就是看最后一个片段。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;对，就是这个片段。<br><img src="/img/2.jpg" alt=""></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;据说这个剧本也是边拍边写的，被西影厂说成文化垃圾，当年的市场反应当然也不好，很小的时候就听过了，当时字都识不全整天盯着六小龄童哪瞧得起这个多毛症的孙悟空，应该都只是瞟了一眼，别提看到最后一幕。第二次看时也是大概感受下像条狗的悲哀，但在那个青春骚动喜欢无病呻吟的年华都没看上这个片段。也是不得不庸俗的承认有些事就是经历过才能感受，如果青春期的我看到我现在这个loser样会不会狠狠踹上一脚我不知道，如果他真能出现在我面前，我也只能对他说：兄弟，对不起，不是我想的。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;如果要评选结尾处理的最好的电影，大话西游在我的榜单上是可以排第二的（第一是七宗罪和禁闭岛齐名不用争），如果把这个结尾干掉或许大话西游也只是个简单的无厘头喜剧。虽然这部电影并不能做到一点也不浪费镜头（虽然我也没找到明显的浪费），但最后这一组大圣一句台词都没有的镜头，给了我们最大的想象空间和最多的感触。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;其实大圣不像狗的，夕阳武士那句话只是周星驰对自己落寞的过去说的。至尊宝承载了三个轮回的记忆，在变成大圣之前他卷入了一个他爱的女人和爱他的女人的伪三角恋事故中，有人说其实最牛逼的其实还是佛祖观音，安排这一次次转世，大圣再牛逼也是一个表演的马骝仔。他演的只是一个实实在在的人而已，不是神仙，不是妖怪，七情六欲爱恨情仇，他都有过。直到他戴上金箍向观音许诺放弃人世间所有恩怨时他相信会忘掉这一切，可惜并没有孟婆汤帮他真正忘却。他还是带上了紫霞仙子的手链，在紫霞死时暴怒，在最后一次转世中看到紫霞的转世对峙至尊宝的转世。</p>
<p><img src="/img/4.jpg" alt=""></p>
<p><img src="/img/5.jpg" alt=""></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;他想，这时候我能做的无非就是让他们幸福了吧。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;所有回忆和感情就在这一吻和一句我爱你之后，大圣转身离开，留下了个落寞的背影。</p>
<p><img src="/img/6.jpg" alt=""></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;夕阳武士当然是不知道这些的，像条狗或许是无意的玩笑或者讽刺，被偏爱的总有恃无恐嘛，只是紫霞的转世还有些许疑惑，她在哪见过这个背影？</p>
<p><img src="/img/7.jpg" alt=""></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;大圣只是在走远了的时候，回头认真望了一眼。</p>
<p><img src="/img/8.jpg" alt=""></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;然后再也没有回头，继续踏上漫长的西行之路</p>
<p><img src="/img/9.jpg" alt=""></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;人终有喜怒哀乐爱恨情仇，年少时我们能无视所谓的现实敢爱敢恨，成人时畏惧失去而缄口只谈利弊。我想这就是只有少数人才能成功的原因之一吧，现实和理想的差距不仅仅是算计的能力的差距，也需要感性的直觉来推动。光是感性和理性的平衡一般人都很难做到了，何况其他更为艰难的坎？出于对死与失去的畏惧，我们安于平庸且为苟活，对于失去的恋情说没关系天涯无处何芳草，嘲笑那些为一些屁事就牺牲的人，尊严值几毛钱？然后继续像条狗一样头也不回继续西行之路，偶尔也会回头怀念一下过去，继而继续嘲笑自己的愚蠢念头，告诉自己要理性。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;这世上有很多很多的大道理，几乎都有它的反面论证，反正都是人说出来的，被人推翻不是啥稀奇事。反正人都要归为尘土，叨逼这些道理也是给自己化成尘土一个解释，活的越久解释越充实越经得起别人推敲进而成为别人的模范，获取到归为尘土后也没法享有的荣耀。我并不反感这些大道理，追求自己想要的生活和意义很伟大，我只是反感恶意的欺骗和“为你好”来实现自己的目的，人活这一遭已经很不容易，少一点套路，多一点真诚岂不乐哉，为何还要互相伤害？为何需要证明你的道理比我好？为何要用我的痛苦换取你的幸福？还痛心疾首的说是“为我好”？有必要吗？</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;有些事终究可能没有答案，或许也不需要知道，所以就他妈的继续往前走吧，相信他妈的时间会冲淡一切，继续像蝼蚁般苟活吧。</p>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script type="text/javascript" charset="utf-8">
        bShare.addEntry({
        title: "http://Jhuan.coding.me/JHuan/2016/05/24/ciolfsayl0004uc1k67tozvgk/",
        url: "http://Jhuan.coding.me/JHuan/2016/05/24/ciolfsayl0004uc1k67tozvgk/"
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/电影人生/">电影人生</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-晦涩的成人寓言——斯坦利的寓言" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/04/ciolfsayo0007uc1kzrcyz1jc/" class="article-date">
  <time datetime="2016-02-04T09:51:22.000Z" itemprop="datePublished">2016-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/04/ciolfsayo0007uc1kzrcyz1jc/">晦涩的成人寓言——斯坦利的寓言</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;&nbsp;&nbsp;&nbsp;玩惯了主流的PC游戏，都是清一色的打打杀杀，连连连跑跑跑，有时是会很厌倦的，相信这也是大多数即将步入而立之年的人不怎么再爱玩游戏的一个原因，更多处于无聊在手机上玩点休闲的游戏去消磨时光，更糟糕的是最有购买力的大龄青年们越来越不愿意去动脑玩游戏，所谓的手游黄金时期就是给无脑休闲手游带起来的。当然可以振振有词的说沉迷游戏可不好多花点时间在工作学习上收获更多，那么，接下来介绍的这款游戏或许可以让你重新思考一下游戏到底是什么。</p>
<p><img src="http://i0.hdslb.com/u_user/889cd17bd17f6a6a800da7c7b9fbe50d.jpg" alt="游戏封面截图"></p>
<blockquote>
<p>最早作为《半条命2》模组诞生的《史丹利的寓言（Stanley Parable）》是一部特殊的作品，与其说他是游戏，不如说更像是一部晦涩难懂的意识流电影。即便在独立游戏越来越笔走偏锋的今天，它也奇怪得令人费解。有人说它是关于自由意志的嘲讽；有人说它是关于设计工作的无厘头解读；还有人说它是卡夫卡笔下的官僚主义噩梦。但只有一点是肯定的，不是所有的玩家都会爱上《史丹利的寓言》，如果你身边的十个朋友个个都说他们喜欢，其中有一两个人跟风说谎的可能性相当的高。</p>
</blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;知道这部作品时是敖厂长在视频里玩的，对于敖厂长那种逗逼型解说对这部作品明显是不恰当的，这是我还没开始玩的时候就有的结论，这并不是部轻松的游戏。从这部宣传片你可以看个大概：</p>
<p><a href="http://v.youku.com/v_show/id_XNjIzMzkwOTQ0.html" target="_blank" rel="external">http://v.youku.com/v_show/id_XNjIzMzkwOTQ0.html</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;当时是冲着游戏简介去的，我对沙盒和多结局的游戏疯狂的热爱，非常喜欢那种探索一遍又一遍之后还能有新发现的感觉，大概也是受我看书的习惯影响所致。当我刚进去游戏的第一感觉就是：</p>
<p><strong>新奇而压抑</strong></p>
<p><img src="http://img1.tgbusdata.cn/thumbnail/jpg/YjAxNyw2MDAsNjAwLDQsMSwxLC0xLDEsMSxyazUw/u/pc.tgbus.com/uploads/allimg/131119/265-131119154144.jpg" alt="史坦利"></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;大公司的小职员，每天做着单调重复的工作，面无表情或者呆滞，突然有一天出意外了就不知所措…<br>这强烈的代入感居然是旁白兄给的，不得不说非常专业。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;然后碰到我的第一个选择：</p>
<p><img src="http://img1.gamersky.com/image2014/01/20140121zym_2/gamersky_01small_02_201412113086C.jpg" alt="史坦利的第一个选择"></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;左边代表顺从,右边代表逆反。<br>&nbsp;&nbsp;&nbsp;&nbsp;未知的情况，空无一人的大楼，一个莫名奇妙的旁白，信还是不信？<br>&nbsp;&nbsp;&nbsp;&nbsp;于是所有结局和剧情都在此展开，在此期间，史丹利可能跳楼身亡，可能陷入永远走不出的死循环然后暴毙在街上，可能义无反顾的选择自己可预见残酷的结局。当然史丹利也可以一直相信旁白君，配合着他完成一次完美的结局，一次自由意志取得完全大胜利的结局，但即便如此，游戏还是会重启，一次又一次。在此期间，你或许收到赞扬和夸奖，更多的是讽刺与打击，旁白君可能是你的朋友，也可能是过路人而已。史丹利可以做出很多选择，试图改变自己的命运，确实他一次又一次获得了不同的结局，美好的平庸的凄惨的，但故事还是回到起点，一次又一次，每次都回到他那狭窄的办公室里，等着指令按按钮，然后被迫站起身来，去探索不同的结局。<br>&nbsp;&nbsp;&nbsp;&nbsp;真是对自由意志彻头彻尾的讽刺啊。我们所认为重要的或许到最后还是要回到起点，我们所坚持的选择或许根本摆脱不了困境，我们做出的选择，其实可能到头来根本没有意义。<br>&nbsp;&nbsp;&nbsp;&nbsp;这部游戏本身想告诉我们的寓意根本就是不明了的，活脱脱就是去暴力版的大卫林奇作品，混沌而不真实，却能让玩家一遍又一遍去玩，去思索那背后可能连导演都没想好的含义。也出现了各路大神级玩家，其中有一个结局需要你按四个小时的按钮，结果还真有人做了：<a href="http://www.bilibili.com/video/av1242222/" target="_blank" rel="external">《史丹利的寓言》如果你玩婴儿游戏4小时</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;具体的游戏评测游民有一篇文章将的也很到位：<br><a href="http://www.gamersky.com/review/201401/327504.shtml" target="_blank" rel="external">《史丹利的寓言（Stanley Parable）》游民星空点评8.2分 艰涩的成人童话</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;对于我来说，这部游戏可以带来的是一遍一遍的思考，审视当前的人生轨迹，作为一个史坦利，我还能在故事做什么？我知道自己最后的结局，但也会和史坦利一样，不断去探索，作茧自缚实在太没意思了。</p>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script type="text/javascript" charset="utf-8">
        bShare.addEntry({
        title: "http://Jhuan.coding.me/JHuan/2016/02/04/ciolfsayo0007uc1kzrcyz1jc/",
        url: "http://Jhuan.coding.me/JHuan/2016/02/04/ciolfsayo0007uc1kzrcyz1jc/"
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/游戏/">游戏</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-高效展示你的Bitmap（上）" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/03/ciolfsayd0001uc1kcxg24st3/" class="article-date">
  <time datetime="2016-02-03T08:02:33.000Z" itemprop="datePublished">2016-02-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/03/ciolfsayd0001uc1kcxg24st3/">【Android training】高效展示你的Bitmap（上）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考文献：<br><a href="http://developer.android.com/training/displaying-bitmaps/index.html" target="_blank" rel="external">Android Training : Displaying Bitmaps Efficiently</a></p>
<p>前言:Bitmap无疑是内存大户之一，稍不谨慎，虚拟机抛出个OOM（OutofMemoryError）会让你很抓狂。OOM的定位和调试是个头痛的问题，会有专门的章节讲解这一问题，在此之前，要使用正确的体位来把玩我们的bitmap！ o(￣ε￣*)</p>
<h2 id="高效加载大图">高效加载大图</h2><p>现实中，咱们的安卓设备可能会接触到各种形状和大小不同的图片。在一些情况中图片大小大于咱们的手机屏幕，而且在大多数情况下我们不需要这么大的图片展示给用户看，那么就很有必要采取必要的措施来避免直接加载这么大的图片。</p>
<h3 id="读取图片尺寸和类型">读取图片尺寸和类型</h3><p><a href="http://developer.android.com/reference/android/graphics/BitmapFactory.html" target="_blank" rel="external">BitmapFactory</a> 类提供了一系列解析bitmap的方法 (decodeByteArray(), decodeFile(), decodeResource(), etc.)。这些方法是非常容易导致OOM的！你可以通过BitmapFactory.Options来改变加载选项，设置inJustDecodeBounds 选项为true 可以有效避免解析bitmap时的内存分配，来达到只读取图片信息而不是为了显示图片，阔以避免不必要的内存分配！</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">BitmapFactory.<span class="keyword">Options</span> <span class="keyword">options</span> = <span class="keyword">new</span> BitmapFactory.<span class="keyword">Options</span>();</span><br><span class="line"><span class="keyword">options</span>.inJustDecodeBounds = <span class="keyword">true</span>;</span><br><span class="line">BitmapFactory.decodeResource(getResources(), R.id.myimage, <span class="keyword">options</span>);</span><br><span class="line"><span class="keyword">int</span> imageHeight = <span class="keyword">options</span>.outHeight;</span><br><span class="line"><span class="keyword">int</span> imageWidth = <span class="keyword">options</span>.outWidth;</span><br><span class="line">String imageType = <span class="keyword">options</span>.outMimeType;</span><br></pre></td></tr></table></figure>
<h3 id="加载个适配当前需求大小的图片到内存中去吧">加载个适配当前需求大小的图片到内存中去吧</h3><p>好，通过上一步知道了图片的尺寸，我们开始可以决定加载一个怎样的图片了，是原图就可以？还是要做个压缩后的图片（原文是subsampled version卧槽好专业）？别急，先来考虑下以下因素：</p>
<ul>
<li>估算下原图加载所需分配的内存大小</li>
<li>应用内适合分多少内存给这张图片</li>
<li>目标view的尺寸</li>
<li>屏幕尺寸和屏幕密度</li>
</ul>
<p>如果仔细评估过还是加载个压缩后的图片比较好，那可以通过BitmapFactory.Options的inSampleSize可以设置采样率，以下是个栗子：<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> calculateInSampleSize(</span><br><span class="line">            BitmapFactory.Options options, <span class="built_in">int</span> reqWidth, <span class="built_in">int</span> reqHeight) &#123;</span><br><span class="line">    <span class="comment">// Raw height and width of image</span></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> <span class="variable">height</span> = options.outHeight;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> <span class="variable">width</span> = options.outWidth;</span><br><span class="line">    <span class="built_in">int</span> inSampleSize = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">height</span> &gt; reqHeight || <span class="variable">width</span> &gt; reqWidth) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="built_in">int</span> halfHeight = <span class="variable">height</span> / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="built_in">int</span> halfWidth = <span class="variable">width</span> / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Calculate the largest inSampleSize value that is a power of 2 and keeps both</span></span><br><span class="line">        <span class="comment">// height and width larger than the requested height and width.</span></span><br><span class="line">        <span class="keyword">while</span> ((halfHeight / inSampleSize) &gt; reqHeight</span><br><span class="line">                &amp;&amp; (halfWidth / inSampleSize) &gt; reqWidth) &#123;</span><br><span class="line">            inSampleSize *= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inSampleSize;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>注意：采用2的n次幂是因为解码器会用一个向下取整2的n次幂的常量值，<a href="http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize" target="_blank" rel="external">inSampleSize</a>相关文档解释了这一点。</p>
</blockquote>
<h2 id="在非UI线程里处理bitmap">在非UI线程里处理bitmap</h2><p>很显然，在UI线程里处理bitmap可是会被老板骂的╮(╯▽╰)╭，读取图片、图像处理涉及到磁盘访问以及图像处理算法复杂度，这些都是耗时操作，一不小心就引起ANR的哦~so，来看看使用什么体位解决这个问题！</p>
<h3 id="用AsyncTask吧！">用AsyncTask吧！</h3><p><a href="http://developer.android.com/reference/android/os/AsyncTask.html" target="_blank" rel="external">AsyncTask</a>为开发者提供了处理后台耗时操作很便利的解决方案，以下就是个栗子：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BitmapWorkerTask</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">AsyncTask&lt;Integer</span>, <span class="title">Void</span>, <span class="title">Bitmap&gt;</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">WeakReference</span>&lt;<span class="type">ImageView</span>&gt; imageViewReference;</span><br><span class="line">    <span class="keyword">private</span> int data = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    public <span class="type">BitmapWorkerTask</span>(<span class="type">ImageView</span> imageView) &#123;</span><br><span class="line">        <span class="comment">// Use a WeakReference to ensure the ImageView can be garbage collected</span></span><br><span class="line">        imageViewReference = <span class="keyword">new</span> <span class="type">WeakReference</span>&lt;<span class="type">ImageView</span>&gt;(imageView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Decode image in background.</span></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">Bitmap</span> doInBackground(<span class="type">Integer</span>... params) &#123;</span><br><span class="line">        data = params[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">return</span> decodeSampledBitmapFromResource(getResources(), data, <span class="number">100</span>, <span class="number">100</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Once complete, see if ImageView is still around and set bitmap.</span></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void onPostExecute(<span class="type">Bitmap</span> bitmap) &#123;</span><br><span class="line">        <span class="keyword">if</span> (imageViewReference != <span class="literal">null</span> &amp;&amp; bitmap != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">ImageView</span> imageView = imageViewReference.get();</span><br><span class="line">            <span class="keyword">if</span> (imageView != <span class="literal">null</span>) &#123;</span><br><span class="line">                imageView.setImageBitmap(bitmap);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>对ImageView的弱引用可以保证AsyncTask不会阻挠ImageView的垃圾回收（不然就有可能内存泄露啦），由于不能保证后台任务完成时ImageView还在，所以在onPostExecute时要检查ImageView还在不。启动这个异步任务灰常简单，只要以下代码：<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> loadBitmap(<span class="keyword">int</span> resId, ImageView imageView) &#123;</span><br><span class="line">    BitmapWorkerTask <span class="keyword">task</span> = <span class="keyword">new</span> BitmapWorkerTask(imageView);</span><br><span class="line">    <span class="keyword">task</span>.execute(resId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="处理同步问题">处理同步问题</h3><p>但是，一些常见的View（譬如ListView）就这么用AsyncTask会有一系列的问题。ListView在滚动时，为了节省内存，会回收掉子View的内存。so，如果你没想太多，ListView的每一个Item直接上AsyncTask加载图片，可能导致A   子View加载图片的时候用户滚动ListView，A   子View被回收了并且其被回收的内存恰好分配给了B子View，同时加载图片异步任务还在继续，正要显示时所持有的内存引用恰好指向了B 子View，那么B子View就会错位显示A子View该显示的图片啦。更糟糕的是异步任务可是没办法保证按顺序显示图片的。</p>
<p>还好有一篇博客<a href="http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html" target="_blank" rel="external"> Multithreading for Performance </a>提出了解决方案，该类继承自Drawbale类，存放一个指向BitmapWorkerTask的弱引用，当异步任务完成时图像就会显示。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">static <span class="class"><span class="keyword">class</span> <span class="title">AsyncDrawable</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">BitmapDrawable</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">WeakReference</span>&lt;<span class="type">BitmapWorkerTask</span>&gt; bitmapWorkerTaskReference;</span><br><span class="line"></span><br><span class="line">    public <span class="type">AsyncDrawable</span>(<span class="type">Resources</span> res, <span class="type">Bitmap</span> bitmap,</span><br><span class="line">            <span class="type">BitmapWorkerTask</span> bitmapWorkerTask) &#123;</span><br><span class="line">        <span class="keyword">super</span>(res, bitmap);</span><br><span class="line">        bitmapWorkerTaskReference =</span><br><span class="line">            <span class="keyword">new</span> <span class="type">WeakReference</span>&lt;<span class="type">BitmapWorkerTask</span>&gt;(bitmapWorkerTask);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="type">BitmapWorkerTask</span> getBitmapWorkerTask() &#123;</span><br><span class="line">        <span class="keyword">return</span> bitmapWorkerTaskReference.get();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以用这种姿势调用：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> loadBitmap(<span class="keyword">int</span> resId, ImageView imageView) &#123;</span><br><span class="line">    <span class="keyword">if</span> (cancelPotentialWork(resId, imageView)) &#123;</span><br><span class="line">        <span class="keyword">final</span> BitmapWorkerTask <span class="keyword">task</span> = <span class="keyword">new</span> BitmapWorkerTask(imageView);</span><br><span class="line">        <span class="keyword">final</span> AsyncDrawable asyncDrawable =</span><br><span class="line">                <span class="keyword">new</span> AsyncDrawable(getResources(), mPlaceHolderBitmap, <span class="keyword">task</span>);</span><br><span class="line">        imageView.setImageDrawable(asyncDrawable);</span><br><span class="line">        <span class="keyword">task</span>.execute(resId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个cancelPotentialWork方法主要检查这个imageView是否已经和一个已经在执行的异步任务绑定了，如果是的话，会尝试取消这个任务</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">boolean</span> <span class="title">cancelPotentialWork</span><span class="params">(<span class="keyword">int</span> data, ImageView imageView)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> BitmapWorkerTask bitmapWorkerTask = getBitmapWorkerTask(imageView);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (bitmapWorkerTask != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> bitmapData = bitmapWorkerTask.data;</span><br><span class="line">        <span class="comment">// If bitmapData is not yet set or it differs from the new data</span></span><br><span class="line">        <span class="keyword">if</span> (bitmapData == <span class="number">0</span> || bitmapData != data) &#123;</span><br><span class="line">            <span class="comment">// Cancel previous task</span></span><br><span class="line">            bitmapWorkerTask.cancel(<span class="keyword">true</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// The same work is already in progress</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// No task associated with the ImageView, or an existing task was cancelled</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    </span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="function">BitmapWorkerTask <span class="title">getBitmapWorkerTask</span><span class="params">(ImageView imageView)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (imageView != <span class="keyword">null</span>) &#123;</span><br><span class="line">       <span class="keyword">final</span> Drawable drawable = imageView.getDrawable();</span><br><span class="line">       <span class="keyword">if</span> (drawable <span class="keyword">instanceof</span> AsyncDrawable) &#123;</span><br><span class="line">           <span class="keyword">final</span> AsyncDrawable asyncDrawable = (AsyncDrawable) drawable;</span><br><span class="line">           <span class="function"><span class="keyword">return</span> asyncDrawable.<span class="title">getBitmapWorkerTask</span><span class="params">()</span></span>;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后一步就是更新BitmapWorkerTask 里的onPostExecute()，加上任务是否取消以及当前任务是否匹配当前ImageView：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BitmapWorkerTask</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">AsyncTask&lt;Integer</span>, <span class="title">Void</span>, <span class="title">Bitmap&gt;</span> &#123;</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> void onPostExecute(<span class="type">Bitmap</span> bitmap) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isCancelled()) &#123;</span><br><span class="line">            bitmap = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (imageViewReference != <span class="literal">null</span> &amp;&amp; bitmap != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">ImageView</span> imageView = imageViewReference.get();</span><br><span class="line">            <span class="keyword">final</span> <span class="type">BitmapWorkerTask</span> bitmapWorkerTask =</span><br><span class="line">                    getBitmapWorkerTask(imageView);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span> == bitmapWorkerTask &amp;&amp; imageView != <span class="literal">null</span>) &#123;</span><br><span class="line">                imageView.setImageBitmap(bitmap);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上所说的解决方案适用于ListView,GridView等会回收子View的组件。只需简单的调用loadBitmap，就可以放心的加载图片啦！</p>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script type="text/javascript" charset="utf-8">
        bShare.addEntry({
        title: "http://Jhuan.coding.me/JHuan/2016/02/03/ciolfsayd0001uc1kcxg24st3/",
        url: "http://Jhuan.coding.me/JHuan/2016/02/03/ciolfsayd0001uc1kcxg24st3/"
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-training-翻译/">Android training 翻译</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-序" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/24/ciolfsayt000auc1k9rgbjxsb/" class="article-date">
  <time datetime="2015-12-24T11:53:22.000Z" itemprop="datePublished">2015-12-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/24/ciolfsayt000auc1k9rgbjxsb/">序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;记得当时刚在豆瓣开通账号时也写了个序，希望自己能保持记录的习惯，保持思考的习惯，但很遗憾，停了好长的一段时间没有动笔，或者干脆写了一半便再也写不下去，那心血来潮的文字便成了个doc放在硬盘里长眠。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这年头哪里还缺文章，哪里还缺秀自己的感悟，哪里还稀罕微不足道的普通人的一点微不足道的感触。就算是花了大量时间好不容易写出一篇自我感觉还不错的文章，网上随便一找就可以完虐，所有的成就感灰飞烟灭。<br>然而正如寒门难出贵子一样，难并不等于绝对不可能，况且写作的含义并不仅仅限于一种给别人有用的分享或者给自己的无懈可击的总结，它是一段时光的证明，是记录生活一种无法取代的方式。尽管我有了相机之后回去用图片记录，有了朋友圈之后可以碎片化记录，但始终没有用写作去记录更有质感和真实感，它已成为我不可或缺的一种生活方式。尽管再忙，尽管很难坚持每天都写，尽管很难保证高质量的分享，但不应该成为不写作的借口<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所以再起一个序，用自己的博客来写，更有动力和追求。愿自己在后续的道路上，勿忘初心，做好一个普通人应该做的事，做好自己喜欢的事。</p>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script type="text/javascript" charset="utf-8">
        bShare.addEntry({
        title: "http://Jhuan.coding.me/JHuan/2015/12/24/ciolfsayt000auc1k9rgbjxsb/",
        url: "http://Jhuan.coding.me/JHuan/2015/12/24/ciolfsayt000auc1k9rgbjxsb/"
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/感悟/">感悟</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-【Android training】允许其他应用拉起你的应用" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/05/ciolfsaz5000huc1kgakxhshi/" class="article-date">
  <time datetime="2015-11-05T12:30:22.000Z" itemprop="datePublished">2015-11-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/05/ciolfsaz5000huc1kgakxhshi/">【Android training】引导到另一个APP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>原文地址：<a href="http://developer.android.com/training/basics/intents/filters.html" target="_blank" rel="external">Allowing Other Apps to Start Your Activity</a></p>
<p>为了让别的应用能拉起你的应用，你需要在你的AndroidMainfest.xml中对应的<code>&lt;activity&gt;</code>组件里添加<code>&lt;intent-filter&gt;</code>。<br>当你的应用安装在设备时，系统会识别你的intent filter然后添加到内置的目录里。当APP使用隐式Intent调用startActivity()或者startActivityForResult（）时，系统会找到哪些应用能接收这个Intent。</p>
<h2 id="添加一个Intent_Filter">添加一个Intent Filter</h2><p>为了合适地定义你的应用中的Activity所能处理的Intent,每个添加的Intent Filter都需要尽可能地具体。<br>一个标准的Intent包含以下元素：</p>
<h3 id="Action">Action</h3><p>将要执行的动作名称，规定在你的<code>&lt;action&gt;</code>标签中</p>
<h3 id="Data">Data</h3><p>描述所需传递的数据，规定在你的<code>&lt;data&gt;</code>标签中。可以用多个属性规定这个元素，比如说MIME类型，uri前缀，uri scheme，或者是这些属性的组合或者重复。</p>
<h3 id="Category">Category</h3><p>提供一种附加的方法来标识activity如何处理这个Intent，通常和用户的手势位置从哪儿开始有关。系统支持多种不同的分类，但是大部分很少用的到。<strong>但是，所有隐式Intent默认被定义成CATEGORY_DEFAULT</strong></p>
<p>举个栗子，这是一个能接收ACTION_SEND动作，文字或者图像作为数据的Activity：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">activity</span> <span class="attribute">android:name</span>=<span class="value">"ShareActivity"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">action</span> <span class="attribute">android:name</span>=<span class="value">"android.intent.action.SEND"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">category</span> <span class="attribute">android:name</span>=<span class="value">"android.intent.category.DEFAULT"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">data</span> <span class="attribute">android:mimeType</span>=<span class="value">"text/plain"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">data</span> <span class="attribute">android:mimeType</span>=<span class="value">"image/*"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">activity</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>每个Intent只能确定一个Action和一种data类型，但<code>&lt;intent-filter&gt;</code>可以含有多个<code>&lt;action&gt;</code>, <code>&lt;category&gt;</code>, 和 <code>&lt;data&gt;</code>。</p>
<blockquote>
<p>注意：为了能接收隐式Intent，你必须将CATEGORY_DEFAULT这个category加入intent filter中。因为隐式Intent默认分类就是CATEGORY_DEFAULT</p>
</blockquote>
<h2 id="在你的Activity中处理传递过来的Intent">在你的Activity中处理传递过来的Intent</h2><p>为了决定你的Activity如何处理不同的Action，你可以从Intent中获取到Action进行处理。<br>当你的Activity启动时，可以调用getIntent（）获取到启动Activity的Intent。<br>举个栗子：<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">    setContentView(R.layout.main);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get the intent that started this activity</span></span><br><span class="line">    Intent intent = getIntent();</span><br><span class="line">    Uri data = intent.getData();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Figure out what to do based on the intent type</span></span><br><span class="line">    <span class="keyword">if</span> (intent.getType().indexOf(<span class="string">"image/"</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// Handle intents with image data ...</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (intent.getType().equals(<span class="string">"text/plain"</span>)) &#123;</span><br><span class="line">        <span class="comment">// Handle intents with text ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="返回一个结果">返回一个结果</h2><p>如果你想将执行结果返回给拉起你的Actvity，只要简单的调用setResult（），指定返回码和Intent。当操作结束需要返回到原来的Activity时，需要调用finish()结束你的Activity。<br>举个栗子：<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// <span class="type">Create</span> intent to deliver some kind <span class="keyword">of</span> <span class="literal">result</span> data</span><br><span class="line"><span class="type">Intent</span> <span class="literal">result</span> = new <span class="type">Intent</span>(<span class="string">"com.example.RESULT_ACTION"</span>, <span class="type">Uri</span>.parse(<span class="string">"content://result_uri"</span>);</span><br><span class="line">setResult(<span class="type">Activity</span>.<span class="type">RESULT_OK</span>, <span class="literal">result</span>);</span><br><span class="line">finish()</span><br></pre></td></tr></table></figure></p>
<p>你必须指定一个返回码。通常都是RESULT_OK 或者 RESULT_CANCELED。你还可以用Intent带上额外的数据。</p>
<blockquote>
<p>注意：返回结果默认返回码是RESULT_CANCELED，因此，如果用户在完成动作且你设置返回结果之前按下返回键，原来的Acitvity会接受到“cancel”的结果</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script type="text/javascript" charset="utf-8">
        bShare.addEntry({
        title: "http://Jhuan.coding.me/JHuan/2015/11/05/ciolfsaz5000huc1kgakxhshi/",
        url: "http://Jhuan.coding.me/JHuan/2015/11/05/ciolfsaz5000huc1kgakxhshi/"
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-training-翻译/">Android training 翻译</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-【Android training】文件共享" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/30/ciolfsayz000duc1k615l5hvu/" class="article-date">
  <time datetime="2015-10-30T12:12:22.000Z" itemprop="datePublished">2015-10-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/30/ciolfsayz000duc1k615l5hvu/">【Android training】文件共享</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>原文地址：<a href="http://developer.android.com/training/secure-file-sharing/index.html" target="_blank" rel="external">Sharing Files</a>.</p>
<p>为了能安全的将一个文件提供给另一个APP，你需要配置好你的APP，给文件提供一个安全的句柄。Android 组件 <a href="http://developer.android.com/reference/android/support/v4/content/FileProvider.html" target="_blank" rel="external">FileProvider</a> 基于XML配置，为文件生成内容URI。</p>
<blockquote>
<p> Tips: <a href="http://developer.android.com/reference/android/support/v4/content/FileProvider.html" target="_blank" rel="external">FileProvider</a> 已经作为 <a href="http://developer.android.com/tools/support-library/features.html#v4" target="_blank" rel="external">v4 Support Library</a>的一部分了哟~</p>
</blockquote>
<h2 id="声明一个FileProvider">声明一个FileProvider</h2><p>定义一个FileProvider需要在你的mainfest中添加一个入口。这个入口声明了生成内容URI的authorities以及XML文件的名字。这个XML文件确定了你的APP能分享的目录。<br>以下是个栗子：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">manifest</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attribute">package</span>=<span class="value">"com.example.myapp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">application</span></span><br><span class="line">        <span class="attribute">...</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">provider</span></span><br><span class="line">            <span class="attribute">android:name</span>=<span class="value">"android.support.v4.content.FileProvider"</span></span><br><span class="line">            <span class="attribute">android:authorities</span>=<span class="value">"com.example.myapp.fileprovider"</span></span><br><span class="line">            <span class="attribute">android:grantUriPermissions</span>=<span class="value">"true"</span></span><br><span class="line">            <span class="attribute">android:exported</span>=<span class="value">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">meta-data</span></span><br><span class="line">                <span class="attribute">android:name</span>=<span class="value">"android.support.FILE_PROVIDER_PATHS"</span></span><br><span class="line">                <span class="attribute">android:resource</span>=<span class="value">"@xml/filepaths"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">provider</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="title">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在这个栗子中，<a href="http://developer.android.com/guide/topics/manifest/provider-element.html#auth" target="_blank" rel="external">android:authorities</a>属性规定了URL所属的authorities,用于FileProvider生成content uri。meta-data 子元素指向了你想分享出去的XML文件，android:resource指定这个文件的路径和名称（并不包括.xml后缀名哟）</p>
<h2 id="指定要分享的目录">指定要分享的目录</h2><p>当你把FileProvider加入到你的app的Mainfest中后，你需要指定你所要分享的文件所属目录。需要在你的项目目录下 res/xml/创建filepaths.xml 。在这个文件中通过增加XML元素表示你的目录。以下又是一颗栗子：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">paths</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">files-path</span> <span class="attribute">path</span>=<span class="value">"images/"</span> <span class="attribute">name</span>=<span class="value">"myimages"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">paths</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在这个栗子中，files-path 标签共享了你的应用内部存储里的files/. path属性表明分享files/目录下的子目录images/。name属性让FileFileProvider在生成的content URI加上由name指定的路径分隔符。详情可以看看<a href="http://developer.android.com/reference/android/support/v4/content/FileProvider.html" target="_blank" rel="external">FileProvider</a> 为何可以这么做。<br><code>&lt;paths&gt;</code>元素可以有多个子元素，确定多个需要共享的文件夹。除了<code>&lt;files-path&gt;</code>标签之外，还可以用<code>&lt;external-path&gt;</code>元素共享外部存储文件夹，并且还可以用<code>&lt;cache-path&gt;</code>分享内部存储的缓存文件夹。</p>
<blockquote>
<p>注意： 只能用XML文件的形式来制定你要分享到文件夹，你不能通过java代码的形式动态加一个文件夹</p>
</blockquote>
<p>现在呢，你就有一个完整的FileProvider，它能帮你生成你应用内部存储中的files/目录及其子目录下文件的content URI。<br>再举个栗子，如果你按照上面的代码片段定义了一个FileProvider，然后你请求一个default_image.jpg的URI，FileProvider就会返回如下URI：<br><code>content://com.example.myapp.fileprovider/myimages/default_image.jpg</code></p>
<h2 id="接收文件分享请求">接收文件分享请求</h2><p>为了能接收请求方APP的文件请求并响应对应的文件content uri，你应该提供一个文件选择Activity。这样的话请求方APP可以通过startActivityForResult启动这个Activity，传递一个带ACTION_PICK的action的Intent，该Activity接收并处理完毕要嗝屁时，就可以通过setResult反馈uri。</p>
<h2 id="创建一个文件选择的Activity">创建一个文件选择的Activity</h2><p>直接上代码说明：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">manifest</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">        <span class="tag">&lt;<span class="title">application</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">            <span class="tag">&lt;<span class="title">activity</span></span><br><span class="line">                <span class="attribute">android:name</span>=<span class="value">".FileSelectActivity"</span></span><br><span class="line">                <span class="attribute">android:label</span>=<span class="value">"@"</span><span class="value">File</span> <span class="attribute">Selector</span>" &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">intent-filter</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="title">action</span></span><br><span class="line">                        <span class="attribute">android:name</span>=<span class="value">"android.intent.action.PICK"</span>/&gt;</span></span><br><span class="line">                        //指定OPENABLE和DEFAULT两种类型</span><br><span class="line">                    <span class="tag">&lt;<span class="title">category</span></span><br><span class="line">                        <span class="attribute">android:name</span>=<span class="value">"android.intent.category.DEFAULT"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="title">category</span></span><br><span class="line">                        <span class="attribute">android:name</span>=<span class="value">"android.intent.category.OPENABLE"</span>/&gt;</span></span><br><span class="line">                        //通过mimeType制定所需数据类型</span><br><span class="line">                    <span class="tag">&lt;<span class="title">data</span> <span class="attribute">android:mimeType</span>=<span class="value">"text/plain"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="title">data</span> <span class="attribute">android:mimeType</span>=<span class="value">"image/*"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="title">intent-filter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">activity</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="访问分享的文件">访问分享的文件</h2><p>接收方APP会用Intent向请求方发送共享文件的uri，这个Intent将会被传递到请求方的onActivityResult()里。当请求方拿到了文件的cotent uri, 可以通过<a href="http://developer.android.com/reference/java/io/FileDescriptor.html" target="_blank" rel="external">FileDescriptor</a>访问共享文件。<br>在这个过程中，文件访问安全性是得到保证滴。由于content uri不包含目录路径，请求方不能获取到接收方其他的文件。<br>以下是个栗子~<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">   * <span class="type">When</span> the <span class="type">Activity</span> <span class="keyword">of</span> the app that hosts files sets a <span class="literal">result</span> <span class="keyword">and</span> calls</span><br><span class="line">   * finish(), this <span class="keyword">method</span> <span class="keyword">is</span> invoked. <span class="type">The</span> returned <span class="type">Intent</span> contains the</span><br><span class="line">   * content <span class="type">URI</span> <span class="keyword">of</span> a selected file. <span class="type">The</span> <span class="literal">result</span> code indicates <span class="keyword">if</span> the</span><br><span class="line">   * selection worked <span class="keyword">or</span> <span class="keyword">not</span>.</span><br><span class="line">   */</span><br><span class="line">  @<span class="type">Override</span></span><br><span class="line">  public <span class="type">void</span> onActivityResult(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode,</span><br><span class="line">          <span class="type">Intent</span> returnIntent) &#123;</span><br><span class="line">      // <span class="type">If</span> the selection didn't work</span><br><span class="line">      <span class="keyword">if</span> (resultCode != <span class="type">RESULT_OK</span>) &#123;</span><br><span class="line">          // <span class="type">Exit</span> <span class="keyword">without</span> doing anything <span class="keyword">else</span></span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          // <span class="type">Get</span> the file's content <span class="type">URI</span> <span class="keyword">from</span> the incoming <span class="type">Intent</span></span><br><span class="line">          <span class="type">Uri</span> returnUri = returnIntent.getData();</span><br><span class="line">          /*</span><br><span class="line">           * <span class="type">Try</span> to open the file <span class="keyword">for</span> <span class="string">"read"</span> access <span class="keyword">using</span> the</span><br><span class="line">           * returned <span class="type">URI</span>. <span class="type">If</span> the file isn't found, write to the</span><br><span class="line">           * error log <span class="keyword">and</span> <span class="keyword">return</span>.</span><br><span class="line">           */</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              /*</span><br><span class="line">               * <span class="type">Get</span> the content resolver instance <span class="keyword">for</span> this context, <span class="keyword">and</span> use it</span><br><span class="line">               * to get a <span class="type">ParcelFileDescriptor</span> <span class="keyword">for</span> the file.</span><br><span class="line">               */</span><br><span class="line">              mInputPFD = getContentResolver().openFileDescriptor(returnUri, <span class="string">"r"</span>);</span><br><span class="line">          &#125; catch (<span class="type">FileNotFoundException</span> e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">              <span class="type">Log</span>.e(<span class="string">"MainActivity"</span>, <span class="string">"File not found."</span>);</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          // <span class="type">Get</span> a regular file descriptor <span class="keyword">for</span> the file</span><br><span class="line">          <span class="type">FileDescriptor</span> fd = mInputPFD.getFileDescriptor();</span><br><span class="line">          ...</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="获取共享文件的MIME格式">获取共享文件的MIME格式</h2><p>一个文件的数据格式可以表示请求方APP该如何处理该文件内容。我们可以通过调用ContentResolver.getType()来获取共享文件的数据类型，这个方法反馈该文件的MIME类型。<strong>FileProvider默认用文件的后缀名来判断文件所属数据类型</strong>。<br>以下是个栗子：<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * <span class="keyword">Get</span> the file<span class="comment">'s content URI from the incoming Intent, then</span></span><br><span class="line"> * <span class="keyword">get</span> the file<span class="comment">'s MIME type</span></span><br><span class="line"> */</span><br><span class="line">Uri returnUri = returnIntent.getData();</span><br><span class="line"><span class="built_in">String</span> mimeType = getContentResolver().<span class="built_in">getType</span>(returnUri);</span><br></pre></td></tr></table></figure></p>
<h2 id="获取共享文件的名字和大小">获取共享文件的名字和大小</h2><p>FileProvider 有着query() 接口的默认实现，返回一个带着文件大小和名字的Curosr。默认返回两列：</p>
<ul>
<li>DISPLAY_NAME<br>  文件名，返回值与File.getName()相同</li>
<li>SIZE<br>文件大小，返回值和File.length()相同</li>
</ul>
<p>以下就是个获取的栗子：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">    * Get the file's content URI from the incoming Intent,</span><br><span class="line">    * then query the server app to get the file's display name</span><br><span class="line">    * and size.</span><br><span class="line">    */</span></span><br><span class="line">   Uri returnUri = returnIntent.getData();</span><br><span class="line">   Cursor returnCursor =</span><br><span class="line">           getContentResolver().query(returnUri, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">   <span class="comment">/*</span><br><span class="line">    * Get the column indexes of the data in the Cursor,</span><br><span class="line">    * move to the first row in the Cursor, get the data,</span><br><span class="line">    * and display it.</span><br><span class="line">    */</span></span><br><span class="line">   <span class="keyword">int</span> nameIndex = returnCursor.getColumnIndex(OpenableColumns.DISPLAY_NAME);</span><br><span class="line">   <span class="keyword">int</span> sizeIndex = returnCursor.getColumnIndex(OpenableColumns.<span class="keyword">SIZE</span>);</span><br><span class="line">   returnCursor.moveToFirst();</span><br><span class="line">   TextView nameView = (TextView) findViewById(R.id.filename_text);</span><br><span class="line">   TextView sizeView = (TextView) findViewById(R.id.filesize_text);</span><br><span class="line">   nameView.setText(returnCursor.getString(nameIndex));</span><br><span class="line">   sizeView.setText(<span class="keyword">Long</span>.toString(returnCursor.getLong(sizeIndex)));</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script type="text/javascript" charset="utf-8">
        bShare.addEntry({
        title: "http://Jhuan.coding.me/JHuan/2015/10/30/ciolfsayz000duc1k615l5hvu/",
        url: "http://Jhuan.coding.me/JHuan/2015/10/30/ciolfsayz000duc1k615l5hvu/"
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-training-翻译/">Android training 翻译</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-【Android training】引导到另一个APP" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/30/ciolfsaz2000fuc1komdm96je/" class="article-date">
  <time datetime="2015-10-30T12:12:22.000Z" itemprop="datePublished">2015-10-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/30/ciolfsaz2000fuc1komdm96je/">【Android training】引导到另一个APP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Android最重要的一个特性就是可以通过action引导到其他APP里去了。比如说你想在你的APP中将一些地址显示在地图上，你无需专门搞个activity显示地图，你可以用带有地址信息的Intent发起请求，Android系统就会拉起一个APP去做到这点。</p>
<h2 id="用隐式Intent">用隐式Intent</h2><p>隐式Intent无需你指定具体的Class，把指定的action(比如view, edit, send, or get)，再把数据带上就欧啦。</p>
<p>以下是一些例子：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打电话</span></span><br><span class="line"><span class="built_in">Uri</span> number = <span class="built_in">Uri</span>.parse(<span class="string">"tel:5551234"</span>);</span><br><span class="line">Intent callIntent = <span class="keyword">new</span> Intent(Intent.ACTION_DIAL, number);</span><br><span class="line"><span class="comment">//用地图</span></span><br><span class="line"><span class="built_in">Uri</span> location = <span class="built_in">Uri</span>.parse(<span class="string">"geo:0,0?q=1600+Amphitheatre+Parkway,+Mountain+View,+California"</span>);</span><br><span class="line"><span class="built_in">Uri</span> location = <span class="built_in">Uri</span>.parse(<span class="string">"geo:37.422219,-122.08364?z=14"</span>); </span><br><span class="line">Intent mapIntent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, location);</span><br><span class="line"><span class="comment">//浏览网页</span></span><br><span class="line"><span class="built_in">Uri</span> webpage = <span class="built_in">Uri</span>.parse(<span class="string">"http://www.android.com"</span>);</span><br><span class="line">Intent webIntent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, webpage);</span><br></pre></td></tr></table></figure></p>
<h2 id="看看有没应用可以接受俺们的Intent">看看有没应用可以接受俺们的Intent</h2><p>尽管Android系统保证肯定有个内置应用（比如电话，电邮，日历等）会接受俺们的Intent,但你始终应该在使用这个Intent之前要确认下。</p>
<blockquote>
<p>注意：如果你作死使用了一个根本没有应用能接受的Intent，你的APP会Crash的！(ノಠ益ಠ)ノ彡┻━┻</p>
</blockquote>
<p>调用queryIntentActivities()就可以获得能接受你的Intent的应用列表，如果返回的不是空列表你就能安心使用这个Intent啦，(^o^)/YES!<br><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PackageManager packageManager = getPackageManager()<span class="comment">;</span></span><br><span class="line">List activities = packageManager.queryIntentActivities(intent,</span><br><span class="line">        PackageManager.MATCH_DEFAULT_ONLY)<span class="comment">;</span></span><br><span class="line">boolean isIntentSafe = activities.size() &gt; 0<span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<p>如果isIntent是true，那就至少有一个应用能接受你的Intent啦</p>
<p>##用你的Intent拉起一个Activity</p>
<p>当你创建好Intent塞进了数据之后，便可以调用startActivity了。如果系统识别到有多个APP可以处理你的Intent,系统会展示一个对话框供用户选择哪个APP打开，如果只有一个APP能处理你的Intent，那就会立刻被打开。</p>
<p><img src="http://developer.android.com/images/training/basics/intents-choice.png" alt="pic 1" title="pic1:供你选择拉起的APP对话框长这样~"></p>
<p>以下是个完整的例子，演示如何创建一个可以拉起地图应用的intent，然后退出应用拉起地图：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Build the intent</span></span><br><span class="line"><span class="built_in">Uri</span> location = <span class="built_in">Uri</span>.parse(<span class="string">"geo:0,0?q=1600+Amphitheatre+Parkway,+Mountain+View,+California"</span>);</span><br><span class="line">Intent mapIntent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, location);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Verify it resolves</span></span><br><span class="line">PackageManager packageManager = getPackageManager();</span><br><span class="line"><span class="built_in">List</span>&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(mapIntent, <span class="number">0</span>);</span><br><span class="line">boolean isIntentSafe = activities.size() &gt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start an activity if it's safe</span></span><br><span class="line"><span class="keyword">if</span> (isIntentSafe) &#123;</span><br><span class="line">    startActivity(mapIntent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://developer.android.com/images/training/basics/intent-chooser.png" alt="pic 2"></p>
<h2 id="显示一个应用选择对话框">显示一个应用选择对话框</h2><p>可以注意得到当你使用startActivity（）将你的Intent传递到另一个app并且不止一个app可以接收你的Intent时，用户可以通过一个应用选择对话框来决定使用哪个应用，并且能够选择哪个应用作为默认打开方式。如果场景是浏览网页或者拍照那还是个不错的选择。</p>
<p>但是，有些场景可能用户更需要每次都使用不同的app作为打开方式，比如说“分享”。这时你应该强制显示应用选择对话框让用户每次打开时选择使用哪个APP。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="type">intent</span> = new <span class="type">Intent</span>(<span class="type">Intent</span>.ACTION_SEND);</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">// Always <span class="keyword">use</span> string resources for UI text.</span><br><span class="line">// This says something like <span class="string">"Share this photo with"</span></span><br><span class="line">String title = getResources().getString(R.string.chooser_title);</span><br><span class="line">// Create <span class="type">intent</span> to show chooser</span><br><span class="line"><span class="type">Intent</span> chooser = <span class="type">Intent</span>.createChooser(<span class="type">intent</span>, title);</span><br><span class="line"></span><br><span class="line">// <span class="built_in">Verify</span> the <span class="type">intent</span> will resolve to at least one activity</span><br><span class="line"><span class="keyword">if</span> (<span class="type">intent</span>.resolveActivity(getPackageManager()) <span class="comment">!= null) &#123;</span></span><br><span class="line">    startActivity(chooser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script type="text/javascript" charset="utf-8">
        bShare.addEntry({
        title: "http://Jhuan.coding.me/JHuan/2015/10/30/ciolfsaz2000fuc1komdm96je/",
        url: "http://Jhuan.coding.me/JHuan/2015/10/30/ciolfsaz2000fuc1komdm96je/"
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-training-翻译/">Android training 翻译</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-Hexo使用笔记（一）" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/15/ciolfsawz0000uc1k3aw20iks/" class="article-date">
  <time datetime="2015-10-15T12:12:22.000Z" itemprop="datePublished">2015-10-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/15/ciolfsawz0000uc1k3aw20iks/">Hexo使用笔记（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用hexo的初衷很简单，别人家的博客系统要么界面low逼要么内容low逼，一旦有运营介入肯定就有广告。个人并不反对广告，但对于强插的中插广告或者大条幅的广告简直这种强奸眼球的做法是不能忍的。而且更多的目的是边学边用，深入浅出的用一个工具，比直接硬啃html+js+css+balalala….好玩的多。当时选择做程序员，图的就是好玩嘛~</p>
<h2 id="Hexo简介">Hexo简介</h2><p>Hexo官网的一句概括：（Hexo官网网址：<a href="https://hexo.io/）" target="_blank" rel="external">https://hexo.io/）</a></p>
<blockquote>
<p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用<a href="http://daringfireball.net/projects/markdown/" target="_blank" rel="external">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
</blockquote>
<p><strong>Hexo的本质就是工具集成，集Markdown渲染、插件开发与远程部署的一个炫酷工具。</strong>用来做一个简单优雅的静态博客就非常适合，如果想要炫酷到没朋友请用WordPress~</p>
<p>顺便贴下作者的一篇博客感受下这位ACG爱好者的才（dou）气（bi）：<a href="http://zespia.tw/blog/2012/10/11/hexo-debut/" target="_blank" rel="external">Hexo 颯爽登場！</a></p>
<h2 id="Hexo安装">Hexo安装</h2><p>首先，你得有个…..<br>不用女朋友啦别哭，就这些：<br><a href="http://nodejs.org/" target="_blank" rel="external">Node.js</a><br><a href="http://git-scm.com/" target="_blank" rel="external">Git</a></p>
<p>OK,装完后我们就帅气的用以下命令解决：<br><code>$npm install -g hexo-cli</code></p>
<p>然后就搞定了，简直不能再帅…</p>
<h2 id="Hexo_的HelloWorld">Hexo 的HelloWorld</h2><p>由于先不急着了解Hexo的配置文件与目录结构，先把基本过程过一遍先~工具是先学会使用才去研究原理滴~<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##建站</span></span><br><span class="line"><span class="variable">$ </span>hexo init &lt;folder&gt;</span><br><span class="line"><span class="variable">$ </span>cd &lt;folder&gt;</span><br><span class="line"><span class="variable">$ </span>npm install</span><br><span class="line"></span><br><span class="line"><span class="comment">##生成</span></span><br><span class="line"><span class="variable">$ </span>hexo generate</span><br><span class="line"><span class="variable">$ </span>npm install hexo-server --save</span><br><span class="line"><span class="variable">$ </span>hexo server</span><br></pre></td></tr></table></figure></p>
<p>在浏览器中打开<a href="http://127.0.0.1:4000" target="_blank" rel="external">http://127.0.0.1:4000</a>,~duang~<br>PS：重点说下hexo-server这个坑，由于网上很多教程是针对hexo 2.0，所以3.0以上的童鞋注意下。</p>
<h2 id="Hexo_部署到gitcafe">Hexo 部署到gitcafe</h2><p>OK，本地环境妥妥的了~就可以考虑部署了。我选择gitcafe只因为速度问题大家懂得~</p>
<ol>
<li>注册gitcafe账号<br>这个自己整….</li>
<li>新建一个与自己用户名相同名字的项目<br>不要像我一样为了炫酷取个与用户名不同的项目…否则会很麻烦。gitcafe的pages服务默认就是以用户名同名的项目。</li>
<li><p>生成gitcafe的SSH key<br>这样你可以在~/.ssh下看到gitcafe，gitcafe.pub了</p>
<figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="char">$ </span>mkdir ~/.ssh</span><br><span class="line"><span class="char">$ </span>ssh-keygen -t rsa -<span class="class">C</span> <span class="comment">"你的邮箱@xxx.com"</span> -f ~/.ssh/gitcafe</span><br></pre></td></tr></table></figure>
</li>
<li><p>连接配置<br>首先创建一个配置文件先~    然后加上以下语句：<br>Host gitcafe.com www.gitcafe.com<br>IdentityFile ~/.ssh/gitcafe</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$touch</span> ~/.ssh/config</span><br></pre></td></tr></table></figure>
</li>
<li><p>gitcafe上设置部署key<br>将~/.ssh/文件夹下的GitCafe.pub中的内容复制到公钥框中即可。</p>
</li>
<li><p>修改_config.yml<br>在末尾加上以下语句</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repo</span>: <span class="attribute">https</span>:<span class="comment">//gitcafe.com/JHuan/JHuan.git,gitcafe-pages</span></span><br></pre></td></tr></table></figure>
<p>在hexo 3.0 type以后就只有git了没有github和gitcafe之分~</p>
</li>
<li>部署！<br>终于等到你我还好没放弃<br><code>hexo d</code><br>如果一切顺利，你可以通过<a href="http://你的用户名.gitcafe.io访问你的博客了！" target="_blank" rel="external">http://你的用户名.gitcafe.io访问你的博客了！</a></li>
</ol>
<h2 id="那些坑">那些坑</h2><p>如果你一切都顺利那祝贺你可以开始愉快的和hexo玩耍了<br>如果你也不幸跟我一样踩坑了，看看以下有没能够帮助你的：</p>
<ol>
<li><p>记得挂代理….<br>感谢党感谢人民感谢GFW连npm都要帮我们墙掉那是有多爱我们。<br><code>$npm config set proxy=http://192.168.1.1:8080</code><br>具体端口和代理地址请自行替换哈<br>在公司办公网的童鞋记得ssh和git bash也要挂上代理哈</p>
</li>
<li><p>请勿在cmd中使用hexo<br>如果你也跟我一样还在悲催的使用windows做开发，请记得在gitbash中使用hexo。如若不信你可以试下hexo deploy。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script type="text/javascript" charset="utf-8">
        bShare.addEntry({
        title: "http://Jhuan.coding.me/JHuan/2015/10/15/ciolfsawz0000uc1k3aw20iks/",
        url: "http://Jhuan.coding.me/JHuan/2015/10/15/ciolfsawz0000uc1k3aw20iks/"
        });
      </script>
      <br>
      <br>
      <br>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-training-翻译/">Android training 翻译</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感悟/">感悟</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/游戏/">游戏</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影人生/">电影人生</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android-training-翻译/" style="font-size: 20px;">Android training 翻译</a> <a href="/tags/感悟/" style="font-size: 10px;">感悟</a> <a href="/tags/游戏/" style="font-size: 10px;">游戏</a> <a href="/tags/电影人生/" style="font-size: 10px;">电影人生</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/05/24/ciolfsayl0004uc1k67tozvgk/">谈谈那个大圣的背影</a>
          </li>
        
          <li>
            <a href="/2016/02/04/ciolfsayo0007uc1kzrcyz1jc/">晦涩的成人寓言——斯坦利的寓言</a>
          </li>
        
          <li>
            <a href="/2016/02/03/ciolfsayd0001uc1kcxg24st3/">【Android training】高效展示你的Bitmap（上）</a>
          </li>
        
          <li>
            <a href="/2015/12/24/ciolfsayt000auc1k9rgbjxsb/">序</a>
          </li>
        
          <li>
            <a href="/2015/11/05/ciolfsaz5000huc1kgakxhshi/">【Android training】引导到另一个APP</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 barryjiang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
     <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
       <script type="text/javascript" charset="utf-8">
        bShare.addEntry({
          url: "http://jhuan.gitcafe.io",
          title: "Just a Blog"
        });
      </script>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>