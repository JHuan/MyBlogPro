<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Just a Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Just a Blog">
<meta property="og:url" content="http://jhuan.gitcafe.io/index.html">
<meta property="og:site_name" content="Just a Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Just a Blog">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Just a Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Just a Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">谈笑有鸿儒</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://jhuan.gitcafe.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="hexo-序" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/24/序/" class="article-date">
  <time datetime="2015-12-24T11:53:22.000Z" itemprop="datePublished">2015-12-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/24/序/">序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;记得当时刚在豆瓣开通账号时也写了个序，希望自己能保持记录的习惯，保持思考的习惯，但很遗憾，停了好长的一段时间没有动笔，或者干脆写了一半便再也写不下去，那心血来潮的文字便成了个doc放在硬盘里长眠。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这年头哪里还缺文章，哪里还缺秀自己的感悟，哪里还稀罕微不足道的普通人的一点微不足道的感触。就算是花了大量时间好不容易写出一篇自我感觉还不错的文章，网上随便一找就可以完虐，所有的成就感灰飞烟灭。<br>然而正如寒门难出贵子一样，难并不等于绝对不可能，况且写作的含义并不仅仅限于一种给别人有用的分享或者给自己的无懈可击的总结，它是一段时光的证明，是记录生活一种无法取代的方式。尽管我有了相机之后回去用图片记录，有了朋友圈之后可以碎片化记录，但始终没有用写作去记录更有质感和真实感，它已成为我不可或缺的一种生活方式。尽管再忙，尽管很难坚持每天都写，尽管很难保证高质量的分享，但不应该成为不写作的借口<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;所以再起一个序，用自己的博客来写，更有动力和追求。愿自己在后续的道路上，勿忘初心，做好一个普通人应该做的事，做好自己喜欢的事。</p>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
      <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
          bShare.addEntry({
          title: "http://jhuan.gitcafe.io/2015/12/24/序/",
          url: "http://jhuan.gitcafe.io/2015/12/24/序/"
          });
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/感悟/">感悟</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-【Android training】允许其他应用拉起你的应用" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/05/【Android training】允许其他应用拉起你的应用/" class="article-date">
  <time datetime="2015-11-05T12:30:22.000Z" itemprop="datePublished">2015-11-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/05/【Android training】允许其他应用拉起你的应用/">【Android training】引导到另一个APP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>原文地址：<a href="http://developer.android.com/training/basics/intents/filters.html" target="_blank" rel="external">Allowing Other Apps to Start Your Activity</a></p>
<p>为了让别的应用能拉起你的应用，你需要在你的AndroidMainfest.xml中对应的<code>&lt;activity&gt;</code>组件里添加<code>&lt;intent-filter&gt;</code>。<br>当你的应用安装在设备时，系统会识别你的intent filter然后添加到内置的目录里。当APP使用隐式Intent调用startActivity()或者startActivityForResult（）时，系统会找到哪些应用能接收这个Intent。</p>
<h2 id="添加一个Intent_Filter">添加一个Intent Filter</h2><p>为了合适地定义你的应用中的Activity所能处理的Intent,每个添加的Intent Filter都需要尽可能地具体。<br>一个标准的Intent包含以下元素：</p>
<h3 id="Action">Action</h3><p>将要执行的动作名称，规定在你的<code>&lt;action&gt;</code>标签中</p>
<h3 id="Data">Data</h3><p>描述所需传递的数据，规定在你的<code>&lt;data&gt;</code>标签中。可以用多个属性规定这个元素，比如说MIME类型，uri前缀，uri scheme，或者是这些属性的组合或者重复。</p>
<h3 id="Category">Category</h3><p>提供一种附加的方法来标识activity如何处理这个Intent，通常和用户的手势位置从哪儿开始有关。系统支持多种不同的分类，但是大部分很少用的到。<strong>但是，所有隐式Intent默认被定义成CATEGORY_DEFAULT</strong></p>
<p>举个栗子，这是一个能接收ACTION_SEND动作，文字或者图像作为数据的Activity：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">activity</span> <span class="attribute">android:name</span>=<span class="value">"ShareActivity"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">action</span> <span class="attribute">android:name</span>=<span class="value">"android.intent.action.SEND"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">category</span> <span class="attribute">android:name</span>=<span class="value">"android.intent.category.DEFAULT"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">data</span> <span class="attribute">android:mimeType</span>=<span class="value">"text/plain"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">data</span> <span class="attribute">android:mimeType</span>=<span class="value">"image/*"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">activity</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>每个Intent只能确定一个Action和一种data类型，但<code>&lt;intent-filter&gt;</code>可以含有多个<code>&lt;action&gt;</code>, <code>&lt;category&gt;</code>, 和 <code>&lt;data&gt;</code>。</p>
<blockquote>
<p>注意：为了能接收隐式Intent，你必须将CATEGORY_DEFAULT这个category加入intent filter中。因为隐式Intent默认分类就是CATEGORY_DEFAULT</p>
</blockquote>
<h2 id="在你的Activity中处理传递过来的Intent">在你的Activity中处理传递过来的Intent</h2><p>为了决定你的Activity如何处理不同的Action，你可以从Intent中获取到Action进行处理。<br>当你的Activity启动时，可以调用getIntent（）获取到启动Activity的Intent。<br>举个栗子：<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">    setContentView(R.layout.main);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get the intent that started this activity</span></span><br><span class="line">    Intent intent = getIntent();</span><br><span class="line">    Uri data = intent.getData();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Figure out what to do based on the intent type</span></span><br><span class="line">    <span class="keyword">if</span> (intent.getType().indexOf(<span class="string">"image/"</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// Handle intents with image data ...</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (intent.getType().equals(<span class="string">"text/plain"</span>)) &#123;</span><br><span class="line">        <span class="comment">// Handle intents with text ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="返回一个结果">返回一个结果</h2><p>如果你想将执行结果返回给拉起你的Actvity，只要简单的调用setResult（），指定返回码和Intent。当操作结束需要返回到原来的Activity时，需要调用finish()结束你的Activity。<br>举个栗子：<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// <span class="type">Create</span> intent to deliver some kind <span class="keyword">of</span> <span class="literal">result</span> data</span><br><span class="line"><span class="type">Intent</span> <span class="literal">result</span> = new <span class="type">Intent</span>(<span class="string">"com.example.RESULT_ACTION"</span>, <span class="type">Uri</span>.parse(<span class="string">"content://result_uri"</span>);</span><br><span class="line">setResult(<span class="type">Activity</span>.<span class="type">RESULT_OK</span>, <span class="literal">result</span>);</span><br><span class="line">finish()</span><br></pre></td></tr></table></figure></p>
<p>你必须指定一个返回码。通常都是RESULT_OK 或者 RESULT_CANCELED。你还可以用Intent带上额外的数据。</p>
<blockquote>
<p>注意：返回结果默认返回码是RESULT_CANCELED，因此，如果用户在完成动作且你设置返回结果之前按下返回键，原来的Acitvity会接受到“cancel”的结果</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
      <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
          bShare.addEntry({
          title: "http://jhuan.gitcafe.io/2015/11/05/【Android training】允许其他应用拉起你的应用/",
          url: "http://jhuan.gitcafe.io/2015/11/05/【Android training】允许其他应用拉起你的应用/"
          });
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-training-翻译/">Android training 翻译</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-【Android training】文件共享" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/30/【Android training】文件共享/" class="article-date">
  <time datetime="2015-10-30T12:12:22.000Z" itemprop="datePublished">2015-10-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/30/【Android training】文件共享/">【Android training】文件共享</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>原文地址：<a href="http://developer.android.com/training/secure-file-sharing/index.html" target="_blank" rel="external">Sharing Files</a>.</p>
<p>为了能安全的将一个文件提供给另一个APP，你需要配置好你的APP，给文件提供一个安全的句柄。Android 组件 <a href="http://developer.android.com/reference/android/support/v4/content/FileProvider.html" target="_blank" rel="external">FileProvider</a> 基于XML配置，为文件生成内容URI。</p>
<blockquote>
<p> Tips: <a href="http://developer.android.com/reference/android/support/v4/content/FileProvider.html" target="_blank" rel="external">FileProvider</a> 已经作为 <a href="http://developer.android.com/tools/support-library/features.html#v4" target="_blank" rel="external">v4 Support Library</a>的一部分了哟~</p>
</blockquote>
<h2 id="声明一个FileProvider">声明一个FileProvider</h2><p>定义一个FileProvider需要在你的mainfest中添加一个入口。这个入口声明了生成内容URI的authorities以及XML文件的名字。这个XML文件确定了你的APP能分享的目录。<br>以下是个栗子：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">manifest</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attribute">package</span>=<span class="value">"com.example.myapp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">application</span></span><br><span class="line">        <span class="attribute">...</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">provider</span></span><br><span class="line">            <span class="attribute">android:name</span>=<span class="value">"android.support.v4.content.FileProvider"</span></span><br><span class="line">            <span class="attribute">android:authorities</span>=<span class="value">"com.example.myapp.fileprovider"</span></span><br><span class="line">            <span class="attribute">android:grantUriPermissions</span>=<span class="value">"true"</span></span><br><span class="line">            <span class="attribute">android:exported</span>=<span class="value">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">meta-data</span></span><br><span class="line">                <span class="attribute">android:name</span>=<span class="value">"android.support.FILE_PROVIDER_PATHS"</span></span><br><span class="line">                <span class="attribute">android:resource</span>=<span class="value">"@xml/filepaths"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">provider</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="title">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在这个栗子中，<a href="http://developer.android.com/guide/topics/manifest/provider-element.html#auth" target="_blank" rel="external">android:authorities</a>属性规定了URL所属的authorities,用于FileProvider生成content uri。meta-data 子元素指向了你想分享出去的XML文件，android:resource指定这个文件的路径和名称（并不包括.xml后缀名哟）</p>
<h2 id="指定要分享的目录">指定要分享的目录</h2><p>当你把FileProvider加入到你的app的Mainfest中后，你需要指定你所要分享的文件所属目录。需要在你的项目目录下 res/xml/创建filepaths.xml 。在这个文件中通过增加XML元素表示你的目录。以下又是一颗栗子：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">paths</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">files-path</span> <span class="attribute">path</span>=<span class="value">"images/"</span> <span class="attribute">name</span>=<span class="value">"myimages"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">paths</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在这个栗子中，files-path 标签共享了你的应用内部存储里的files/. path属性表明分享files/目录下的子目录images/。name属性让FileFileProvider在生成的content URI加上由name指定的路径分隔符。详情可以看看<a href="http://developer.android.com/reference/android/support/v4/content/FileProvider.html" target="_blank" rel="external">FileProvider</a> 为何可以这么做。<br><code>&lt;paths&gt;</code>元素可以有多个子元素，确定多个需要共享的文件夹。除了<code>&lt;files-path&gt;</code>标签之外，还可以用<code>&lt;external-path&gt;</code>元素共享外部存储文件夹，并且还可以用<code>&lt;cache-path&gt;</code>分享内部存储的缓存文件夹。</p>
<blockquote>
<p>注意： 只能用XML文件的形式来制定你要分享到文件夹，你不能通过java代码的形式动态加一个文件夹</p>
</blockquote>
<p>现在呢，你就有一个完整的FileProvider，它能帮你生成你应用内部存储中的files/目录及其子目录下文件的content URI。<br>再举个栗子，如果你按照上面的代码片段定义了一个FileProvider，然后你请求一个default_image.jpg的URI，FileProvider就会返回如下URI：<br><code>content://com.example.myapp.fileprovider/myimages/default_image.jpg</code></p>
<h2 id="接收文件分享请求">接收文件分享请求</h2><p>为了能接收请求方APP的文件请求并响应对应的文件content uri，你应该提供一个文件选择Activity。这样的话请求方APP可以通过startActivityForResult启动这个Activity，传递一个带ACTION_PICK的action的Intent，该Activity接收并处理完毕要嗝屁时，就可以通过setResult反馈uri。</p>
<h2 id="创建一个文件选择的Activity">创建一个文件选择的Activity</h2><p>直接上代码说明：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">manifest</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">        <span class="tag">&lt;<span class="title">application</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">            <span class="tag">&lt;<span class="title">activity</span></span><br><span class="line">                <span class="attribute">android:name</span>=<span class="value">".FileSelectActivity"</span></span><br><span class="line">                <span class="attribute">android:label</span>=<span class="value">"@"</span><span class="value">File</span> <span class="attribute">Selector</span>" &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">intent-filter</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="title">action</span></span><br><span class="line">                        <span class="attribute">android:name</span>=<span class="value">"android.intent.action.PICK"</span>/&gt;</span></span><br><span class="line">                        //指定OPENABLE和DEFAULT两种类型</span><br><span class="line">                    <span class="tag">&lt;<span class="title">category</span></span><br><span class="line">                        <span class="attribute">android:name</span>=<span class="value">"android.intent.category.DEFAULT"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="title">category</span></span><br><span class="line">                        <span class="attribute">android:name</span>=<span class="value">"android.intent.category.OPENABLE"</span>/&gt;</span></span><br><span class="line">                        //通过mimeType制定所需数据类型</span><br><span class="line">                    <span class="tag">&lt;<span class="title">data</span> <span class="attribute">android:mimeType</span>=<span class="value">"text/plain"</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="title">data</span> <span class="attribute">android:mimeType</span>=<span class="value">"image/*"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="title">intent-filter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">activity</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="访问分享的文件">访问分享的文件</h2><p>接收方APP会用Intent向请求方发送共享文件的uri，这个Intent将会被传递到请求方的onActivityResult()里。当请求方拿到了文件的cotent uri, 可以通过<a href="http://developer.android.com/reference/java/io/FileDescriptor.html" target="_blank" rel="external">FileDescriptor</a>访问共享文件。<br>在这个过程中，文件访问安全性是得到保证滴。由于content uri不包含目录路径，请求方不能获取到接收方其他的文件。<br>以下是个栗子~<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">   * <span class="type">When</span> the <span class="type">Activity</span> <span class="keyword">of</span> the app that hosts files sets a <span class="literal">result</span> <span class="keyword">and</span> calls</span><br><span class="line">   * finish(), this <span class="keyword">method</span> <span class="keyword">is</span> invoked. <span class="type">The</span> returned <span class="type">Intent</span> contains the</span><br><span class="line">   * content <span class="type">URI</span> <span class="keyword">of</span> a selected file. <span class="type">The</span> <span class="literal">result</span> code indicates <span class="keyword">if</span> the</span><br><span class="line">   * selection worked <span class="keyword">or</span> <span class="keyword">not</span>.</span><br><span class="line">   */</span><br><span class="line">  @<span class="type">Override</span></span><br><span class="line">  public <span class="type">void</span> onActivityResult(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode,</span><br><span class="line">          <span class="type">Intent</span> returnIntent) &#123;</span><br><span class="line">      // <span class="type">If</span> the selection didn't work</span><br><span class="line">      <span class="keyword">if</span> (resultCode != <span class="type">RESULT_OK</span>) &#123;</span><br><span class="line">          // <span class="type">Exit</span> <span class="keyword">without</span> doing anything <span class="keyword">else</span></span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          // <span class="type">Get</span> the file's content <span class="type">URI</span> <span class="keyword">from</span> the incoming <span class="type">Intent</span></span><br><span class="line">          <span class="type">Uri</span> returnUri = returnIntent.getData();</span><br><span class="line">          /*</span><br><span class="line">           * <span class="type">Try</span> to open the file <span class="keyword">for</span> <span class="string">"read"</span> access <span class="keyword">using</span> the</span><br><span class="line">           * returned <span class="type">URI</span>. <span class="type">If</span> the file isn't found, write to the</span><br><span class="line">           * error log <span class="keyword">and</span> <span class="keyword">return</span>.</span><br><span class="line">           */</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              /*</span><br><span class="line">               * <span class="type">Get</span> the content resolver instance <span class="keyword">for</span> this context, <span class="keyword">and</span> use it</span><br><span class="line">               * to get a <span class="type">ParcelFileDescriptor</span> <span class="keyword">for</span> the file.</span><br><span class="line">               */</span><br><span class="line">              mInputPFD = getContentResolver().openFileDescriptor(returnUri, <span class="string">"r"</span>);</span><br><span class="line">          &#125; catch (<span class="type">FileNotFoundException</span> e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">              <span class="type">Log</span>.e(<span class="string">"MainActivity"</span>, <span class="string">"File not found."</span>);</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          // <span class="type">Get</span> a regular file descriptor <span class="keyword">for</span> the file</span><br><span class="line">          <span class="type">FileDescriptor</span> fd = mInputPFD.getFileDescriptor();</span><br><span class="line">          ...</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="获取共享文件的MIME格式">获取共享文件的MIME格式</h2><p>一个文件的数据格式可以表示请求方APP该如何处理该文件内容。我们可以通过调用ContentResolver.getType()来获取共享文件的数据类型，这个方法反馈该文件的MIME类型。<strong>FileProvider默认用文件的后缀名来判断文件所属数据类型</strong>。<br>以下是个栗子：<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * <span class="keyword">Get</span> the file<span class="comment">'s content URI from the incoming Intent, then</span></span><br><span class="line"> * <span class="keyword">get</span> the file<span class="comment">'s MIME type</span></span><br><span class="line"> */</span><br><span class="line">Uri returnUri = returnIntent.getData();</span><br><span class="line"><span class="built_in">String</span> mimeType = getContentResolver().<span class="built_in">getType</span>(returnUri);</span><br></pre></td></tr></table></figure></p>
<h2 id="获取共享文件的名字和大小">获取共享文件的名字和大小</h2><p>FileProvider 有着query() 接口的默认实现，返回一个带着文件大小和名字的Curosr。默认返回两列：</p>
<ul>
<li>DISPLAY_NAME<br>  文件名，返回值与File.getName()相同</li>
<li>SIZE<br>文件大小，返回值和File.length()相同</li>
</ul>
<p>以下就是个获取的栗子：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">    * Get the file's content URI from the incoming Intent,</span><br><span class="line">    * then query the server app to get the file's display name</span><br><span class="line">    * and size.</span><br><span class="line">    */</span></span><br><span class="line">   Uri returnUri = returnIntent.getData();</span><br><span class="line">   Cursor returnCursor =</span><br><span class="line">           getContentResolver().query(returnUri, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">   <span class="comment">/*</span><br><span class="line">    * Get the column indexes of the data in the Cursor,</span><br><span class="line">    * move to the first row in the Cursor, get the data,</span><br><span class="line">    * and display it.</span><br><span class="line">    */</span></span><br><span class="line">   <span class="keyword">int</span> nameIndex = returnCursor.getColumnIndex(OpenableColumns.DISPLAY_NAME);</span><br><span class="line">   <span class="keyword">int</span> sizeIndex = returnCursor.getColumnIndex(OpenableColumns.<span class="keyword">SIZE</span>);</span><br><span class="line">   returnCursor.moveToFirst();</span><br><span class="line">   TextView nameView = (TextView) findViewById(R.id.filename_text);</span><br><span class="line">   TextView sizeView = (TextView) findViewById(R.id.filesize_text);</span><br><span class="line">   nameView.setText(returnCursor.getString(nameIndex));</span><br><span class="line">   sizeView.setText(<span class="keyword">Long</span>.toString(returnCursor.getLong(sizeIndex)));</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
      <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
          bShare.addEntry({
          title: "http://jhuan.gitcafe.io/2015/10/30/【Android training】文件共享/",
          url: "http://jhuan.gitcafe.io/2015/10/30/【Android training】文件共享/"
          });
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-training-翻译/">Android training 翻译</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-【Android training】引导到另一个APP" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/30/【Android training】引导到另一个APP/" class="article-date">
  <time datetime="2015-10-30T12:12:22.000Z" itemprop="datePublished">2015-10-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/30/【Android training】引导到另一个APP/">【Android training】引导到另一个APP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Android最重要的一个特性就是可以通过action引导到其他APP里去了。比如说你想在你的APP中将一些地址显示在地图上，你无需专门搞个activity显示地图，你可以用带有地址信息的Intent发起请求，Android系统就会拉起一个APP去做到这点。</p>
<h2 id="用隐式Intent">用隐式Intent</h2><p>隐式Intent无需你指定具体的Class，把指定的action(比如view, edit, send, or get)，再把数据带上就欧啦。</p>
<p>以下是一些例子：<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打电话</span></span><br><span class="line"><span class="built_in">Uri</span> number = <span class="built_in">Uri</span>.parse(<span class="string">"tel:5551234"</span>);</span><br><span class="line">Intent callIntent = <span class="keyword">new</span> Intent(Intent.ACTION_DIAL, number);</span><br><span class="line"><span class="comment">//用地图</span></span><br><span class="line"><span class="built_in">Uri</span> location = <span class="built_in">Uri</span>.parse(<span class="string">"geo:0,0?q=1600+Amphitheatre+Parkway,+Mountain+View,+California"</span>);</span><br><span class="line"><span class="built_in">Uri</span> location = <span class="built_in">Uri</span>.parse(<span class="string">"geo:37.422219,-122.08364?z=14"</span>); </span><br><span class="line">Intent mapIntent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, location);</span><br><span class="line"><span class="comment">//浏览网页</span></span><br><span class="line"><span class="built_in">Uri</span> webpage = <span class="built_in">Uri</span>.parse(<span class="string">"http://www.android.com"</span>);</span><br><span class="line">Intent webIntent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, webpage);</span><br></pre></td></tr></table></figure></p>
<h2 id="看看有没应用可以接受俺们的Intent">看看有没应用可以接受俺们的Intent</h2><p>尽管Android系统保证肯定有个内置应用（比如电话，电邮，日历等）会接受俺们的Intent,但你始终应该在使用这个Intent之前要确认下。</p>
<blockquote>
<p>注意：如果你作死使用了一个根本没有应用能接受的Intent，你的APP会Crash的！(ノಠ益ಠ)ノ彡┻━┻</p>
</blockquote>
<p>调用queryIntentActivities()就可以获得能接受你的Intent的应用列表，如果返回的不是空列表你就能安心使用这个Intent啦，(^o^)/YES!<br><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PackageManager packageManager = getPackageManager()<span class="comment">;</span></span><br><span class="line">List activities = packageManager.queryIntentActivities(intent,</span><br><span class="line">        PackageManager.MATCH_DEFAULT_ONLY)<span class="comment">;</span></span><br><span class="line">boolean isIntentSafe = activities.size() &gt; 0<span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<p>如果isIntent是true，那就至少有一个应用能接受你的Intent啦</p>
<p>##用你的Intent拉起一个Activity</p>
<p>当你创建好Intent塞进了数据之后，便可以调用startActivity了。如果系统识别到有多个APP可以处理你的Intent,系统会展示一个对话框供用户选择哪个APP打开，如果只有一个APP能处理你的Intent，那就会立刻被打开。</p>
<p><img src="http://developer.android.com/images/training/basics/intents-choice.png" alt="pic 1" title="pic1:供你选择拉起的APP对话框长这样~"></p>
<p>以下是个完整的例子，演示如何创建一个可以拉起地图应用的intent，然后退出应用拉起地图：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Build the intent</span></span><br><span class="line"><span class="built_in">Uri</span> location = <span class="built_in">Uri</span>.parse(<span class="string">"geo:0,0?q=1600+Amphitheatre+Parkway,+Mountain+View,+California"</span>);</span><br><span class="line">Intent mapIntent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW, location);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Verify it resolves</span></span><br><span class="line">PackageManager packageManager = getPackageManager();</span><br><span class="line"><span class="built_in">List</span>&lt;ResolveInfo&gt; activities = packageManager.queryIntentActivities(mapIntent, <span class="number">0</span>);</span><br><span class="line">boolean isIntentSafe = activities.size() &gt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start an activity if it's safe</span></span><br><span class="line"><span class="keyword">if</span> (isIntentSafe) &#123;</span><br><span class="line">    startActivity(mapIntent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://developer.android.com/images/training/basics/intent-chooser.png" alt="pic 2"></p>
<h2 id="显示一个应用选择对话框">显示一个应用选择对话框</h2><p>可以注意得到当你使用startActivity（）将你的Intent传递到另一个app并且不止一个app可以接收你的Intent时，用户可以通过一个应用选择对话框来决定使用哪个应用，并且能够选择哪个应用作为默认打开方式。如果场景是浏览网页或者拍照那还是个不错的选择。</p>
<p>但是，有些场景可能用户更需要每次都使用不同的app作为打开方式，比如说“分享”。这时你应该强制显示应用选择对话框让用户每次打开时选择使用哪个APP。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="type">intent</span> = new <span class="type">Intent</span>(<span class="type">Intent</span>.ACTION_SEND);</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">// Always <span class="keyword">use</span> string resources for UI text.</span><br><span class="line">// This says something like <span class="string">"Share this photo with"</span></span><br><span class="line">String title = getResources().getString(R.string.chooser_title);</span><br><span class="line">// Create <span class="type">intent</span> to show chooser</span><br><span class="line"><span class="type">Intent</span> chooser = <span class="type">Intent</span>.createChooser(<span class="type">intent</span>, title);</span><br><span class="line"></span><br><span class="line">// <span class="built_in">Verify</span> the <span class="type">intent</span> will resolve to at least one activity</span><br><span class="line"><span class="keyword">if</span> (<span class="type">intent</span>.resolveActivity(getPackageManager()) <span class="comment">!= null) &#123;</span></span><br><span class="line">    startActivity(chooser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
      <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
          bShare.addEntry({
          title: "http://jhuan.gitcafe.io/2015/10/30/【Android training】引导到另一个APP/",
          url: "http://jhuan.gitcafe.io/2015/10/30/【Android training】引导到另一个APP/"
          });
        });
      </script>
      <br>
      <br>
      <br>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-training-翻译/">Android training 翻译</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="hexo-Hexo使用笔记（一）" class="article article-type-hexo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/15/Hexo使用笔记（一）/" class="article-date">
  <time datetime="2015-10-15T12:12:22.000Z" itemprop="datePublished">2015-10-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/15/Hexo使用笔记（一）/">Hexo使用笔记（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用hexo的初衷很简单，别人家的博客系统要么界面low逼要么内容low逼，一旦有运营介入肯定就有广告。个人并不反对广告，但对于强插的中插广告或者大条幅的广告简直这种强奸眼球的做法是不能忍的。而且更多的目的是边学边用，深入浅出的用一个工具，比直接硬啃html+js+css+balalala….好玩的多。当时选择做程序员，图的就是好玩嘛~</p>
<h2 id="Hexo简介">Hexo简介</h2><p>Hexo官网的一句概括：（Hexo官网网址：<a href="https://hexo.io/）" target="_blank" rel="external">https://hexo.io/）</a></p>
<blockquote>
<p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用<a href="http://daringfireball.net/projects/markdown/" target="_blank" rel="external">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
</blockquote>
<p><strong>Hexo的本质就是工具集成，集Markdown渲染、插件开发与远程部署的一个炫酷工具。</strong>用来做一个简单优雅的静态博客就非常适合，如果想要炫酷到没朋友请用WordPress~</p>
<p>顺便贴下作者的一篇博客感受下这位ACG爱好者的才（dou）气（bi）：<a href="http://zespia.tw/blog/2012/10/11/hexo-debut/" target="_blank" rel="external">Hexo 颯爽登場！</a></p>
<h2 id="Hexo安装">Hexo安装</h2><p>首先，你得有个…..<br>不用女朋友啦别哭，就这些：<br><a href="http://nodejs.org/" target="_blank" rel="external">Node.js</a><br><a href="http://git-scm.com/" target="_blank" rel="external">Git</a></p>
<p>OK,装完后我们就帅气的用以下命令解决：<br><code>$npm install -g hexo-cli</code></p>
<p>然后就搞定了，简直不能再帅…</p>
<h2 id="Hexo_的HelloWorld">Hexo 的HelloWorld</h2><p>由于先不急着了解Hexo的配置文件与目录结构，先把基本过程过一遍先~工具是先学会使用才去研究原理滴~<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##建站</span></span><br><span class="line"><span class="variable">$ </span>hexo init &lt;folder&gt;</span><br><span class="line"><span class="variable">$ </span>cd &lt;folder&gt;</span><br><span class="line"><span class="variable">$ </span>npm install</span><br><span class="line"></span><br><span class="line"><span class="comment">##生成</span></span><br><span class="line"><span class="variable">$ </span>hexo generate</span><br><span class="line"><span class="variable">$ </span>npm install hexo-server --save</span><br><span class="line"><span class="variable">$ </span>hexo server</span><br></pre></td></tr></table></figure></p>
<p>在浏览器中打开<a href="http://127.0.0.1:4000" target="_blank" rel="external">http://127.0.0.1:4000</a>,~duang~<br>PS：重点说下hexo-server这个坑，由于网上很多教程是针对hexo 2.0，所以3.0以上的童鞋注意下。</p>
<h2 id="Hexo_部署到gitcafe">Hexo 部署到gitcafe</h2><p>OK，本地环境妥妥的了~就可以考虑部署了。我选择gitcafe只因为速度问题大家懂得~</p>
<ol>
<li>注册gitcafe账号<br>这个自己整….</li>
<li>新建一个与自己用户名相同名字的项目<br>不要像我一样为了炫酷取个与用户名不同的项目…否则会很麻烦。gitcafe的pages服务默认就是以用户名同名的项目。</li>
<li><p>生成gitcafe的SSH key<br>这样你可以在~/.ssh下看到gitcafe，gitcafe.pub了</p>
<figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="char">$ </span>mkdir ~/.ssh</span><br><span class="line"><span class="char">$ </span>ssh-keygen -t rsa -<span class="class">C</span> <span class="comment">"你的邮箱@xxx.com"</span> -f ~/.ssh/gitcafe</span><br></pre></td></tr></table></figure>
</li>
<li><p>连接配置<br>首先创建一个配置文件先~    然后加上以下语句：<br>Host gitcafe.com www.gitcafe.com<br>IdentityFile ~/.ssh/gitcafe</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$touch</span> ~/.ssh/config</span><br></pre></td></tr></table></figure>
</li>
<li><p>gitcafe上设置部署key<br>将~/.ssh/文件夹下的GitCafe.pub中的内容复制到公钥框中即可。</p>
</li>
<li><p>修改_config.yml<br>在末尾加上以下语句</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repo</span>: <span class="attribute">https</span>:<span class="comment">//gitcafe.com/JHuan/JHuan.git,gitcafe-pages</span></span><br></pre></td></tr></table></figure>
<p>在hexo 3.0 type以后就只有git了没有github和gitcafe之分~</p>
</li>
<li>部署！<br>终于等到你我还好没放弃<br><code>hexo d</code><br>如果一切顺利，你可以通过<a href="http://你的用户名.gitcafe.io访问你的博客了！" target="_blank" rel="external">http://你的用户名.gitcafe.io访问你的博客了！</a></li>
</ol>
<h2 id="那些坑">那些坑</h2><p>如果你一切都顺利那祝贺你可以开始愉快的和hexo玩耍了<br>如果你也不幸跟我一样踩坑了，看看以下有没能够帮助你的：</p>
<ol>
<li><p>记得挂代理….<br>感谢党感谢人民感谢GFW连npm都要帮我们墙掉那是有多爱我们。<br><code>$npm config set proxy=http://192.168.1.1:8080</code><br>具体端口和代理地址请自行替换哈<br>在公司办公网的童鞋记得ssh和git bash也要挂上代理哈</p>
</li>
<li><p>请勿在cmd中使用hexo<br>如果你也跟我一样还在悲催的使用windows做开发，请记得在gitbash中使用hexo。如若不信你可以试下hexo deploy。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
      <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
      <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
          bShare.addEntry({
          title: "http://jhuan.gitcafe.io/2015/10/15/Hexo使用笔记（一）/",
          url: "http://jhuan.gitcafe.io/2015/10/15/Hexo使用笔记（一）/"
          });
        });
      </script>
      <br>
      <br>
      <br>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-training-翻译/">Android training 翻译</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感悟/">感悟</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android-training-翻译/" style="font-size: 20px;">Android training 翻译</a> <a href="/tags/感悟/" style="font-size: 10px;">感悟</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/12/24/序/">序</a>
          </li>
        
          <li>
            <a href="/2015/11/05/【Android training】允许其他应用拉起你的应用/">【Android training】引导到另一个APP</a>
          </li>
        
          <li>
            <a href="/2015/10/30/【Android training】文件共享/">【Android training】文件共享</a>
          </li>
        
          <li>
            <a href="/2015/10/30/【Android training】引导到另一个APP/">【Android training】引导到另一个APP</a>
          </li>
        
          <li>
            <a href="/2015/10/15/Hexo使用笔记（一）/">Hexo使用笔记（一）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 barryjiang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
     <div class="share">
	<div class="bshare-custom">
	<div class="bsPromo bsPromo2"></div>
	<a title="分享到" href="http://www.bShare.cn/" id="bshare-shareto" class="bshare-more">分享到</a>
	<a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a>
	<a title="分享到豆瓣" class="bshare-douban" href="javascript:void(0);"></a>
	<a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a>
	<a title="分享到新浪微博" class="bshare-sinaminiblog" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a>
	<span class="BSHARE_COUNT bshare-share-count" style="float: none;">43K</span>
	</div>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=&amp;pophcol=2&amp;lang=zh"></script>
	<script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
</div>
     <script type="text/javascript" charset="utf-8">
        bShare.addEntry({
        url: "http://jhuan.gitcafe.io"
        });
      </script>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>